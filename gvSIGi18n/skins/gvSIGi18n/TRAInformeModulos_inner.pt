<tal:block replace="nothing">
# File: TRAInformeModulos_inner.pt
#
# Copyright (c) 2008, 2009 by Conselleria de Infraestructuras y Transporte de la
# Generalidad Valenciana
#
# GNU General Public License (GPL)
#
# This program is free software; you can redistribute it and/or
# modify it under the terms of the GNU General Public License
# as published by the Free Software Foundation; either version 2
# of the License, or (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program; if not, write to the Free Software
# Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA
# 02110-1301, USA.
#
# Authors: 
# Conselleria de Infraestructuras y Transporte de la Generalidad Valenciana 
# Model Driven Development sl  Valencia (Spain) www.ModelDD.org 
# Antonio Carrasco Valero                       carrasco@ModelDD.org
#
</tal:block>
     
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en">
<body>



    <div metal:define-macro="tInformeModulos_inner" >


     
<tal:block tal:define="
     pPermiteCrearElementos pPermiteCrearElementos | python: False;
     pHeaderPostfix         pHeaderPostfix | string:;
     pInformeModulos        pInformeModulos | nothing" 
     tal:condition="pInformeModulos">
     
    <h2>
        <span tal:content="python: here.fTranslateI18N( 'gvSIGi18n', 'gvSIGi18n_TRAColeccionModulos_contents_modulos_label',   'Modules-' )" />
        <span tal:condition="pHeaderPostfix" tal:content="pHeaderPostfix" />
    </h2>                
    <p class="formHelp" tal:content="python: here.fTranslateI18N( 'gvSIGi18n', 'gvSIGi18n_InformeModulosIntensiveWarning_msgid',  'Reporting the Modules and Languages Status is an intensive process. therefore it is performed periodically by the Coordinator, but not at each user request-' )" />

    <tal:block tal:condition="pInformeModulos" >
        
        <tal:block tal:define="
            pEstados                 python: pInformeModulos[ 'estados'];
            pCabecerasIdiomas        python: pInformeModulos[ 'cabeceras_idiomas'];
            pInformesModulos         python: pInformeModulos[ 'informes_modulos'];
            pClasesFilas             python: ['even', 'odd',];
            pColors                  python: ['Red', 'Yellow', 'Green', 'Blue'];
            pColorsDict              python: {'Pendiente' : 'Red', 'Traducida' : 'Yellow', 'Revisada'  : 'Green', 'Definitiva': 'Blue',};            
            pTextColorsDict          python: {'Pendiente' : 'Red', 'Traducida' : 'Black', 'Revisada'  : 'Green', 'Definitiva': 'Blue',};            
     global pIndex                   python: 0;
            aTranslationsCache       python: {
                'gvSIGi18n_fechaInformeModulos_label':                              here.fTranslateI18N( 'gvSIGi18n', 'gvSIGi18n_fechaInformeModulos_label',                                'Modules Report Date-' ),
                'gvSIGi18n_cadenas_msgid':                                          here.fTranslateI18N( 'gvSIGi18n', 'gvSIGi18n_cadenas_msgid',                                            'Strings-' ),
                'gvSIGi18n_total_msgid':                                            here.fTranslateI18N( 'gvSIGi18n', 'gvSIGi18n_total_msgid',                                              'Total-' ),
                'gvSIGi18n_TRAColeccionModulos_contents_modulos_label':             here.fTranslateI18N( 'gvSIGi18n', 'gvSIGi18n_TRAColeccionModulos_contents_modulos_label',               'Modules-' ),
                'gvSIGi18n_TRAColeccionIdiomas_contents_idiomas_label':             here.fTranslateI18N( 'gvSIGi18n', 'gvSIGi18n_TRAColeccionIdiomas_contents_idiomas_label',               'Languages-' ),
                'gvSIGi18n_TRATraduccion_attr_estadoTraduccion_option_Pendiente':   here.fTranslateI18N( 'gvSIGi18n', 'gvSIGi18n_TRATraduccion_attr_estadoTraduccion_option_Pendiente',     'Pending-' ),
                'gvSIGi18n_TRATraduccion_attr_estadoTraduccion_option_Traducida':   here.fTranslateI18N( 'gvSIGi18n', 'gvSIGi18n_TRATraduccion_attr_estadoTraduccion_option_Traducida',     'Translated-' ),
                'gvSIGi18n_TRATraduccion_attr_estadoTraduccion_option_Revisada':    here.fTranslateI18N( 'gvSIGi18n', 'gvSIGi18n_TRATraduccion_attr_estadoTraduccion_option_Revisada',      'Reviewed-' ),
                'gvSIGi18n_TRATraduccion_attr_estadoTraduccion_option_Definitiva':  here.fTranslateI18N( 'gvSIGi18n', 'gvSIGi18n_TRATraduccion_attr_estadoTraduccion_option_Definitiva',    'Definitive-' ),
                'gvSIGi18n_fechaInformeModulos_label':                              here.fTranslateI18N( 'gvSIGi18n', 'gvSIGi18n_fechaInformeModulos_label',                                'Modules report date-' ),
            }" >
     
            <br/>
            <p>
                <font size="2">
                    <em tal:content="aTranslationsCache/gvSIGi18n_fechaInformeModulos_label" />
                    &nbsp;
                    <strong tal:content="python: here.fAsUnicode( pInformeModulos.get( 'report_date', ''))" />            
                </font>
            </p>
            
            <table width="100%" id="cid_ProgressReportByModules" class="listing" summary="#"  tal:attributes="summary string: Informe de Progreso por Modulos">
                <thead>
                    <tr tal:define="global pColorIndex python: -1">
                        <th class="nosort" align="left">
                            <tal:block tal:content="python: len( pInformesModulos)" />
                            <span tal:content="aTranslationsCache/gvSIGi18n_TRAColeccionModulos_contents_modulos_label" />
                            -
                            <tal:block tal:content="python: len( pCabecerasIdiomas)" />
                            <span tal:content="aTranslationsCache/gvSIGi18n_TRAColeccionIdiomas_contents_idiomas_label" />
                        </th>
                        
                        <th class="nosort" align="right">
                            <span tal:content="aTranslationsCache/gvSIGi18n_cadenas_msgid" />
                        </th>
                        <th class="nosort" align="right">
                            <span tal:content="aTranslationsCache/gvSIGi18n_total_msgid" />
                        </th>
                        
                        <tal:block tal:repeat="unaCabeceraIdioma pCabecerasIdiomas">
                            <tal:block tal:condition="python: unaCabeceraIdioma[ 'list_contents_permission']">
                               <tal:block tal:define="global pURLIdiomaOCatalogo python: '%s/TRATraducir?theCodigoIdiomaCursor=%s&theMostrarInforme=on&theMostrarLista=on' % ( here.absolute_url(), unaCabeceraIdioma[ 'codigo_idioma_en_gvsig'], )" />
                            </tal:block>  
                            <tal:block tal:condition="python: not unaCabeceraIdioma[ 'list_contents_permission']">
                               <tal:block tal:define="global pURLIdiomaOCatalogo python: '%s/TRACatalogo' % here.absolute_url()" />
                            </tal:block>  
                            <th class="nosort" align="center" valign="top" >
                                <a href="#" title="#"  tal:attributes="href python:  pURLIdiomaOCatalogo; title python: unaCabeceraIdioma[ 'nombre_idioma']">
                                    <span tal:content="python: unaCabeceraIdioma[ 'codigo_idioma_en_gvsig']" />
                                    <br/>
                                    <tal:block tal:define="
                                        pCode python: unaCabeceraIdioma[ 'codigo_idioma_en_gvsig'];
                                        pFlag python: here.portal_languages.getFlagForLanguageCode( pCode)">
                                        <tal:block condition="pFlag">
                                            <img width="14" height="11" alt=""
                                                tal:attributes="
                                                    src python: '%s/%s' % ( here.absolute_url(), pFlag);
                                                    title python: unaCabeceraIdioma[ 'codigo_idioma_en_gvsig']" />
                                        </tal:block>
                                        <tal:block condition="python: not pFlag">
                                            <img width="14" height="11" alt=""
                                                tal:attributes="
                                                    src python: '%s/%s' % ( here.absolute_url(), 'tra_flag-ninguna.gif');
                                                    title python: unaCabeceraIdioma[ 'codigo_idioma_en_gvsig']" />
                                        </tal:block>
                                     </tal:block>
                                </a>
                            </th>
                         </tal:block>
                    </tr>
               </thead>
               
               
               <tbody>



                    <tr class="#" 
                        tal:attributes="class python: pClasesFilas[pIndex % 2]">
                        <td align="left" valign="top" >
                            <strong tal:content="aTranslationsCache/gvSIGi18n_total_msgid" />
                            <br/>
                            <tal:block tal:repeat="unInformeEstado python: pInformeModulos[ 'totales_estados']" >                                
                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                <strong>
                                    <font color="#" tal:attributes="color python: pTextColorsDict[ unInformeEstado[ 'nombre_estado'] ]" 
                                       tal:content="python: aTranslationsCache[ 'gvSIGi18n_TRATraduccion_attr_estadoTraduccion_option_%s' % unInformeEstado[ 'nombre_estado']]" />                                
                                </strong>
                                <br/>
                            </tal:block>                    

                        </td>

                        <td align="right" valign="top" >
                            <span tal:content="python: pInformeModulos[ 'numero_cadenas']" />
                        </td>
                        
                        <td align="right" valign="top" >
                            <span tal:content="python: pInformeModulos[ 'total_traducciones']" />
                            <br/>
                            <tal:block tal:repeat="unInformeEstado python: pInformeModulos[  'totales_estados']" >
                                <tal:block tal:condition="python: unInformeEstado[ 'cantidad']">                                    
                                    <font color="#" tal:attributes="color python: pTextColorsDict[ unInformeEstado[ 'nombre_estado']]"
                                        tal:content="python: unInformeEstado[ 'cantidad']" />
                                </tal:block>                    
                                <tal:block tal:condition="python: not unInformeEstado[ 'cantidad']">                                    
                                    <font color="#" tal:attributes="color python: pTextColorsDict[ unInformeEstado[ 'nombre_estado'] ]" >
                                    -
                                    </font>
                                </tal:block>                    
                                <br/>
                            </tal:block>                    
                        </td>
                        <td align="right" tal:repeat="unIndexIdioma python: range( len( pCabecerasIdiomas))">
                           <tal:block tal:define="unaCabeceraIdioma python: pCabecerasIdiomas[ unIndexIdioma]" >
                                <tal:block tal:condition="python:  unaCabeceraIdioma[ 'list_contents_permission']">
                                   <tal:block tal:define="global pURLIdiomaOCatalogo python: '%s/TRATraducir?theCodigoIdiomaCursor=%s&theMostrarInforme=on&theMostrarLista=on' % (  here.absolute_url(), unaCabeceraIdioma[ 'codigo_idioma_en_gvsig'], )" />
                                </tal:block>  
                                <tal:block tal:condition="python: not unaCabeceraIdioma[ 'list_contents_permission']">
                                   <tal:block tal:define="global pURLIdiomaOCatalogo python: '%s/TRACatalogo' % here.absolute_url()" />
                                </tal:block>  
                                <a href="#" title="#"  tal:attributes="href python: pURLIdiomaOCatalogo; title python: unaCabeceraIdioma[ 'codigo_idioma_en_gvsig']"
                                    tal:content="python: unaCabeceraIdioma[ 'numero_cadenas']" />                                
                                <br/>
                                <tal:block tal:repeat="unInformeEstado python: unaCabeceraIdioma[ 'totales_estados']">
                                    <tal:block tal:condition="python:  unaCabeceraIdioma[ 'list_contents_permission']">
                                       <tal:block tal:define="global pURLIdiomaOCatalogo python: '%s/TRATraducir?theCodigoIdiomaCursor=%s&theMostrarInforme=on&theMostrarLista=on&%s=1' % ( here.absolute_url(), unaCabeceraIdioma[ 'codigo_idioma_en_gvsig'],  unInformeEstado[ 'nombre_estado'])" />
                                    </tal:block>  
                                    <tal:block tal:condition="python: not unaCabeceraIdioma[ 'list_contents_permission']">
                                       <tal:block tal:define="global pURLIdiomaOCatalogo python: '%s/TRACatalogo' % here.absolute_url()" />
                                    </tal:block>  
                                    <tal:block tal:condition="python: unInformeEstado[ 'cantidad']">                                    
                                        <a href="#" title="#"  tal:attributes="href python: pURLIdiomaOCatalogo; title python: unaCabeceraIdioma[ 'codigo_idioma_en_gvsig']">
                                            <font color="#" tal:attributes="color python: pTextColorsDict[ unInformeEstado[ 'nombre_estado'] ]" 
                                                tal:content="python: unInformeEstado[ 'cantidad']" />
                                        </a>
                                    </tal:block>
                                    <tal:block tal:condition="python: not unInformeEstado[ 'cantidad']">                                    
                                        <font color="#" tal:attributes="color python: pTextColorsDict[ unInformeEstado[ 'nombre_estado'] ]" >
                                        -
                                        </font>
                                    </tal:block>                                    
                                    <br/>
                                </tal:block>
                            </tal:block>                    
                        </td>
                        <tal:block tal:define="global pIndex python: pIndex + 1" />                        
                    </tr>


                    <tr class="#" 
                        tal:attributes="class python: pClasesFilas[pIndex % 2]"
                        tal:repeat="unInformeModulo pInformesModulos">
                        <td align="left" valign="top" >
                            <span tal:content="python: here.fAsUnicode( unInformeModulo[ 'nombre_modulo'])" />
                            <br/>
                            <tal:block tal:repeat="unInformeEstado python: unInformeModulo[ 'totales_estados']" >                                
                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                <font color="#" tal:attributes="color python: pTextColorsDict[ unInformeEstado[ 'nombre_estado'] ]" 
                                   tal:content="python: aTranslationsCache[ 'gvSIGi18n_TRATraduccion_attr_estadoTraduccion_option_%s' % unInformeEstado[ 'nombre_estado']]" />                                
                                <br/>
                            </tal:block>                    

                        </td>

                        <td align="right" valign="top" >
                            <span tal:content="python: unInformeModulo[ 'numero_cadenas']" />
                        </td>
                        
                        <td align="right" valign="top" >
                            <span tal:content="python: unInformeModulo[ 'total_traducciones']" />
                            <br/>
                            <tal:block tal:repeat="unInformeEstado python: unInformeModulo[  'totales_estados']" >
                                <tal:block tal:condition="python: unInformeEstado[ 'cantidad']">                                    
                                    <font color="#" tal:attributes="color python: pTextColorsDict[ unInformeEstado[ 'nombre_estado']]"
                                        tal:content="python: unInformeEstado[ 'cantidad']" />
                                </tal:block>                    
                                <tal:block tal:condition="python: not unInformeEstado[ 'cantidad']">                                    
                                    <font color="#" tal:attributes="color python: pTextColorsDict[ unInformeEstado[ 'nombre_estado'] ]" >
                                    -
                                    </font>
                                </tal:block>                    
                                <br/>
                            </tal:block>                    
                        </td>
                                                
                        <td align="right" valign="top"
                            tal:define="unosInformesIdiomas python: unInformeModulo[ 'informes_idiomas']" 
                            tal:repeat="unIndexIdioma python: range( len( pCabecerasIdiomas))" >
                            
                            <tal:block tal:define="unInformeIdioma python: unosInformesIdiomas[ unIndexIdioma]; 
                                unaCabeceraIdioma python: pCabecerasIdiomas[ unIndexIdioma]">
                                <tal:block tal:condition="python:  unaCabeceraIdioma[ 'list_contents_permission']">
                                   <tal:block tal:define="global pURLIdiomaOCatalogo python: '%s/TRATraducir?theCodigoIdiomaCursor=%s&theMostrarInforme=on&theMostrarLista=on&theSearchNombreModulo=%s' % (  here.absolute_url(), unaCabeceraIdioma[ 'codigo_idioma_en_gvsig'], unInformeModulo[ 'nombre_modulo'])" />
                                </tal:block>  
                                <tal:block tal:condition="python: not unaCabeceraIdioma[ 'list_contents_permission']">
                                   <tal:block tal:define="global pURLIdiomaOCatalogo python: '%s/TRACatalogo' % here.absolute_url()" />
                                </tal:block>  
                                <a href="#" title="#"  tal:attributes="href python: pURLIdiomaOCatalogo; title python: unaCabeceraIdioma[ 'codigo_idioma_en_gvsig']"
                                    tal:content="python: unInformeIdioma[ 'total_traducciones']" />                                
                                <br/>
                                <tal:block tal:repeat="unInformeEstado python: unInformeIdioma[ 'informes_estados']">
                                    <tal:block tal:condition="python:  unaCabeceraIdioma[ 'list_contents_permission']">
                                       <tal:block tal:define="global pURLIdiomaOCatalogo python: '%s/TRATraducir?theCodigoIdiomaCursor=%s&theMostrarInforme=on&theMostrarLista=on&theSearchNombreModulo=%s&%s=1' % (  here.absolute_url(), unaCabeceraIdioma[ 'codigo_idioma_en_gvsig'], unInformeModulo[ 'nombre_modulo'], unInformeEstado[ 'nombre_estado'])" />
                                    </tal:block>  
                                    <tal:block tal:condition="python: not unaCabeceraIdioma[ 'list_contents_permission']">
                                       <tal:block tal:define="global pURLIdiomaOCatalogo python: '%s/TRACatalogo' % here.absolute_url()" />
                                    </tal:block>  
                                    <tal:block tal:condition="python: unInformeEstado[ 'cantidad']">                                    
                                        <a href="#" title="#"  tal:attributes="href python: pURLIdiomaOCatalogo; title python: unaCabeceraIdioma[ 'codigo_idioma_en_gvsig']">
                                            <font color="#" tal:attributes="color python: pTextColorsDict[ unInformeEstado[ 'nombre_estado'] ]" 
                                                tal:content="python: unInformeEstado[ 'cantidad']" />
                                        </a>
                                    </tal:block>
                                    <tal:block tal:condition="python: not unInformeEstado[ 'cantidad']">                                    
                                        <font color="#" tal:attributes="color python: pTextColorsDict[ unInformeEstado[ 'nombre_estado'] ]" >
                                        -
                                        </font>
                                    </tal:block>                                    
                                    <br/>
                                </tal:block>
                            </tal:block>                    
                        </td>
                        <tal:block tal:define="global pIndex python: pIndex + 1" />
                        
                    </tr>
                </tbody>
            </table>
        </tal:block>
    </tal:block>
        
    <tal:block tal:condition="not: pInformeModulos" >
        <br/>
        <h3 tal:content="python: here.fTranslateI18N( 'gvSIGi18n', 'gvSIGi18n_noHayInfomeModulos_msgid',   'No Modules Status Report available-' )" />
        <br/>
    </tal:block>
</tal:block>



</div>




</body>
</html>
