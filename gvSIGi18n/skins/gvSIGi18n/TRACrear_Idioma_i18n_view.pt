<tal:block replace="nothing">
# File: TRACrear_Idioma_i18n_view.pt
# Copyright (c) 2008, 2009 by Conselleria de Infraestructuras y Transporte de la
# Generalidad Valenciana
#
# GNU General Public License (GPL)
#
# This program is free software; you can redistribute it and/or
# modify it under the terms of the GNU General Public License
# as published by the Free Software Foundation; either version 2
# of the License, or (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program; if not, write to the Free Software
# Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA
# 02110-1301, USA.
#
# Authors: 
# Conselleria de Infraestructuras y Transporte de la Generalidad Valenciana 
# Model Driven Development sl  Valencia (Spain) www.ModelDD.org 
# Antonio Carrasco Valero                       carrasco@ModelDD.org
#
</tal:block>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en">
<body>


	<div metal:define-macro="tTRACrear_Idioma_i18n_view" >
	
	
		<metal:block metal:use-macro="here/PerformanceAnalysis/macros/tSetupPerformanceAnalysis" />   
	
		
		<tal:block tal:define="
				pNewTypeName						request/theNewTypeName        | string:;		
				pAggregationName					request/theAggregationName    | string:;
				pNewKnownCodigoIdioma				request/theNewKnownCodigoIdioma				| string:;
				pNewCodigoIdiomaEnGvSIG				request/theNewCodigoIdiomaEnGvSIG           | string:;
				pNewCodigoIdioma					python: ( pNewKnownCodigoIdioma and ( not ( pNewKnownCodigoIdioma == '---')) and pNewKnownCodigoIdioma) or pNewCodigoIdiomaEnGvSIG;
				pNewCodigoInternacionalDeIdioma		request/theNewCodigoInternacionalDeIdioma   | pNewCodigoIdioma;
				pNewEnglishName						request/theNewEnglishName                   | pNewCodigoIdioma;
				pNewNombreNativoDeIdioma			request/theNewNombreNativoDeIdioma                    | pNewEnglishName;
		 global pMostrarFormulario					python: (( not pNewKnownCodigoIdioma) or ( pNewKnownCodigoIdioma == '---' )) and ( (not pNewCodigoIdiomaEnGvSIG) or (not pNewEnglishName));
				pNewEnglishName						python: pNewEnglishName or pNewCodigoIdioma;
				pNewNombreNativoDeIdioma			python: pNewNombreNativoDeIdioma or pNewEnglishName;
				pTrue								python: True;
				pFalse								python: False;
				pPermissionsCache					python: { };
				pRolesCache							python: { };
				pParentExecutionRecord				pExecutionRecord | nothing;">
				
			<tal:block tal:define="
				pUseCaseAssessmentResult python: here.fUseCaseAssessment( 
					theUseCaseName          = 'Create_TRAIdioma', 
					theElementsBindings     = { 'object': here,},
					theRulesToCollect       = None, 
					thePermissionsCache     = pPermissionsCache, 
					theRolesCache           = pRolesCache, 
					theParentExecutionRecord= pExecutionRecord);
				pPermiteCrear python: pUseCaseAssessmentResult and pUseCaseAssessmentResult.get( 'success', False)" >
				
				
				<tal:block tal:condition="not: pPermiteCrear" >
					<br>
					<h2 > 
						<a  href="#" tal:attributes="href python: '%s/Tabular' % here.getCatalogo().absolute_url()" class="state-visible" title="">
							<font color="Red">                    
								<span  i18n:domain="gvSIGi18n" i18n:translate="gvSIGi18n_crearIdioma_action_NoPermissionToCreate_ErrorMsg">You do not have permission to create a new Language-</span>
							</font>
						</a>                
					</h2>      
				</tal:block>				

				
				<tal:block tal:condition="pPermiteCrear" >	
				
					<tal:block tal:condition="not: pMostrarFormulario" >
						<tal:block tal:define="
							pProfilingResults python: (pPerformanceAnalysis or {}).get( 'profiling_results', None);
							someAdditionalParams python: {
								'theCodigoIdiomaEnGvSIG'				:pNewCodigoIdioma,  
								'theCodigoInternacionalDeIdioma'        :pNewCodigoInternacionalDeIdioma, 
								'theEnglishName'						:pNewEnglishName,
								'theNombreNativoDeIdioma'				:pNewNombreNativoDeIdioma,  
							}; 
							unosArgs python: {
								'theTimeProfilingResults' :pProfilingResults,
								'theContainerElement'     :here, 
								'theTypeName'             :pNewTypeName, 
								'theTitle'                :pNewEnglishName, 
								'theDescription'          :'',
								'theAdditionalParams'     :someAdditionalParams,
								'theAllowFactoryMethods'  :True,};   
							pCrearResult python: here.ModelDDvlPlone_tool.fCrearElementoDeTipo( **unosArgs)" >
							<tal:block tal:condition="python: pCrearResult and ( pCrearResult[ 'effect'] == 'created')" >
								<tal:block tal:define="
									dummy python:request.response.redirect( '%s/Editar' % pCrearResult[ 'new_object_result'][ 'url']);" />
							</tal:block>
							<tal:block tal:condition="python: not ( pCrearResult) or not ( pCrearResult[ 'effect'] == 'created')" >
								<tal:block tal:define="global pMostrarFormulario python: True" />
								<h4>
									<font color="Red">
										<span i18n:domain="ModelDDvlPlone"  i18n:translate="ModelDDvlPlone_nosehacreadoelemento_info_msgid" >ModelDDvlPlone_nosehacreadoelemento_info_msgid</span>
									</font>
								</h4>
								<p>
									<font color="Red">
										<span tal:condition="python: pCrearResult[ 'failure'] in [ 'duplicate_title',]"
											i18n:domain="ModelDDvlPlone"  i18n:translate="ModelDDvlPlone_tituloduplicado_error_msgid" >ModelDDvlPlone_tituloduplicado_error_msgid
											<tal:block tal:define="global pMostrarFormulario pTrue" />
										</span>
										<span tal:condition="python: pCrearResult[ 'failure'] in [ 'read_permission', 'write_permission',]"
											i18n:domain="ModelDDvlPlone"  i18n:translate="ModelDDvlPlone_sinpermisoparacrear_error_message" >ModelDDvlPlone_sinpermisoparacrear_error_message</span>
										<span tal:condition="python: pCrearResult[ 'failure'] in [ 'content_type_not_allowed', ]"
											i18n:domain="ModelDDvlPlone"  i18n:translate="ModelDDvlPlone_nosepuedecreartipocontenido_error_message" >ModelDDvlPlone_nosepuedecreartipocontenido_error_message</span>
										<span tal:condition="python: pCrearResult[ 'failure'] in [ 'factory_failure', ]"
											i18n:domain="ModelDDvlPlone"  i18n:translate="ModelDDvlPlone_creandocontenido_error_message" >ModelDDvlPlone_creandocontenido_error_message</span>
										<span tal:condition="python: not( pCrearResult[ 'failure'] in [ 'duplicate_title', 'factory_failure', 'read_permission', 'write_permission',  'content_type_not_allowed',  'factory_failure', ])"
											i18n:domain="ModelDDvlPlone"  i18n:translate="" tal:content="pCrearResult/failure" />
	
									</font>
								</p>
								<br/>
							</tal:block>
						</tal:block>
					</tal:block>
				
					
					<tal:block tal:condition="pMostrarFormulario" >
						<form name="Crear_TRAIdioma" method="post" enctype="multipart/form-data"
							tal:define="pIdiomasCodesAndDisplayNames python: here.fNonExistingKnownIdiomasCodesAndDisplayNames()">
							
							<tal:block tal:condition="pIdiomasCodesAndDisplayNames">
								<h3  i18n:domain="gvSIGi18n" i18n:translate="gvSIGi18n_crearIdioma_action_page_title">Create New Language-</h3>
								<br/>
								<p class="formHelp" i18n:domain="gvSIGi18n" i18n:translate="gvSIGi18n_crearIdioma_action_page_help">Select one of the known languages, or Enter the language code and name of the language in english. Optionally enter the international code (if different) and the native language name.-</p>
								<br/>			    
								<p><strong  i18n:domain="gvSIGi18n" i18n:translate="gvSIGi18n_TRACrearIioma_wellKnownLanguages_label">Well Known Languages-</strong></p>
								<p  class="formHelp" i18n:domain="gvSIGi18n" i18n:translate="gvSIGi18n_TRACrearIioma_wellKnownLanguages_helpl">The following are languages well known to the gvSIG-i18n application. Leave the --- option to enter another language, in the fields below.-</p>
								
								<select  style="font-size: 9pt;" name="theNewKnownCodigoIdioma" id="theNewKnownCodigoIdioma" >
									<option 
										id="cid_NewKnownLanguageCode_Nonw" value="---"
										tal:content="string:---" />
									<tal:block tal:repeat="unIdiomaIndex python: range( len(  pIdiomasCodesAndDisplayNames))">
										<tal:block tal:define="
											unValorYEtiquetaReferencia     python: pIdiomasCodesAndDisplayNames[ unIdiomaIndex];
											pCodeReferencia                python: unValorYEtiquetaReferencia[ 0];
											pTitleReferencia               python: unValorYEtiquetaReferencia[ 1]" >                                                            
											<option 
												id="#" value="#"
												tal:content="pTitleReferencia"
												tal:attributes="value python: pCodeReferencia;
													id python: 'cid_NewLanguageCode_%d' % ( unIdiomaIndex, )"/>
										</tal:block>
									</tal:block>
								</select>
							</tal:block>
									
							<br/>
							<br/>
							<br/>			    
							
							<input originalvalue="#" name="theNewTypeName" value="#" type="hidden"
								tal:attributes="originalvalue python: pNewTypeName;value python: pNewTypeName" />
								
							<input originalvalue="#" name="theAggregationName" value="#" type="hidden"
								tal:attributes="originalvalue python: pAggregationName;value python: pAggregationName" />
								
							<p><strong  i18n:domain="gvSIGi18n" i18n:translate="gvSIGi18n_TRACrearIioma_otherLanguageData_label">Enter data for a language not yet known to the gvSIG-i18n application-</strong></p>
							<br/>			    
		
							<p><strong  i18n:domain="gvSIGi18n" i18n:translate="gvSIGi18n_TRAIdioma_attr_codigoIdiomaEnGvSIG_label">Language code in gvSIG-</strong></p>
							<p  class="formHelp" i18n:domain="gvSIGi18n" i18n:translate="gvSIGi18n_TRAIdioma_attr_codigoIdiomaEnGvSIG_help">Language code in gvSIG, as gvSIG supports some languages for which there is no international code (yet).-</p>
							<input name="theNewCodigoIdiomaEnGvSIG" id="theNewCodigoIdiomaEnGvSIG" type="text" size="10" maxlength="10" tabindex="1"
								value="" tal:attributes="value pNewCodigoIdiomaEnGvSIG"/> 					
							<br/>			    
							<br/>
							
							<p><strong  i18n:domain="gvSIGi18n" i18n:translate="gvSIGi18n_TRAIdioma_attr_codigoInternacionalDeIdioma_label">International language code-</strong></p>
							<p  class="formHelp" i18n:domain="gvSIGi18n" i18n:translate="gvSIGi18n_TRAIdioma_attr_codigoInternacionalDeIdioma_help">Standard international language code,according to I18N conventions.-</p>
							<input name="theCodigoInternacionalDeIdioma" id="theCodigoInternacionalDeIdioma" type="text" size="10" maxlength="10"  tabindex="2" 
								value="" tal:attributes="value pNewCodigoInternacionalDeIdioma"/> 					
							<br/>			    
							<br/>
							
							<p><strong  i18n:domain="gvSIGi18n" i18n:translate="gvSIGi18n_TRAIdioma_attr_nombreEnInglesDeIdioma_label">English name-</strong></p>
							<p  class="formHelp" i18n:domain="gvSIGi18n" i18n:translate="gvSIGi18n_TRAIdioma_attr_nombreEnInglesDeIdioma_help">Nombre del idioma, expresado en idioma ingles.-</p>
							<input name="theNewEnglishName" id="theNewEnglishName" size="32" maxlength="80" tabindex="3" 
								value="" tal:attributes="value pNewEnglishName"/> 					
							<br/>			    
							<br/>
							
							<p><strong  i18n:domain="gvSIGi18n" i18n:translate="gvSIGi18n_TRAIdioma_attr_nombreNativoDeIdioma_label">Native language name-</strong></p>
							<p  class="formHelp" i18n:domain="gvSIGi18n" i18n:translate="gvSIGi18n_TRAIdioma_attr_nombreNativoDeIdioma_help">Language name expressed in the native language-</p>
							<input name="theNewNombreNativoDeIdioma" id="theNewNombreNativoDeIdioma" size="32" maxlength="80" tabindex="4" 
								value="" tal:attributes="value pNewNombreNativoDeIdioma"/> 					
							<br/>			    
									
							<br/>
							<br/>
		
							<input class="context" name="form_submit"  type="submit"  value="Save" tabindex="5" i18n:domain="plone" i18n:attributes="value label_save" />                                                        
						</form>
					</tal:block>				
				</tal:block>
			</tal:block>
		</tal:block>
		
		<metal:block metal:use-macro="here/PerformanceAnalysis/macros/tRenderProcessingTime_HTML" />   
			 
	</div>
    

</body>
</html>

